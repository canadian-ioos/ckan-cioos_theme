<div role="main">
  <div class="container">
    <div class="row row1">
      <div class="col-md-12 col1 centertext title module-content-end">
        <h1><span>{{ _('CIOOS') }}</span> {{ _('Data Catalogue') }}</h1>
        <h2>{{ _('Search, find, download â€” all of our') }} <span><a href="{{ h.url_for(controller='package', action='search') }}">{{h.cioos_count_datasets()}}</a></span> {{ _('datasets') }}.</h2>
        <!-- old block -->
        {# block promoted #}
        {# snippet 'home/snippets/promoted.html' #}
        {# endblock #}
      </div>
      <div class="col-md-12 col1 module-content-end">
        {% block search %}
        {% snippet 'home/snippets/search.html' %}
        {% endblock %}
      </div>
      <!--
      <div class="col-md-12 col1 module-content-end">
        <h3 class="heading">SEARCH BY OCEAN VARIABLE</h3>
        <div class="module-content box">
          <h4>Category A</h4>
          <ul class="media-grid" data-module="media-grid">
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_temp.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Temperature</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_current.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Sea Surface</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_salt.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Salinity</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_ice.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Ice</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
                       <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_temp.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Temperature</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_current.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Sea Surface</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_salt.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Salinity</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_ice.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Ice</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
                        <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_temp.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Temperature</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_current.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Sea Surface</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_salt.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Salinity</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_ice.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Ice</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
          </ul>
          <h4>Other Category</h4>
          <ul class="media-grid" data-module="media-grid">
                        <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_temp.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Temperature</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_current.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Sea Surface</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_salt.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Salinity</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_ice.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Ice</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
                        <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_temp.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Temperature</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_current.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Sea Surface</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_salt.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Salinity</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_ice.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Ice</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
                        <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_temp.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Temperature</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_current.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Sea Surface</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_salt.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Salinity</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_ice.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Ice</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
                        <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_temp.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Temperature</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_current.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Sea Surface</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_salt.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Salinity</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_ice.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Ice</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
                        <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_temp.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Temperature</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_current.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Sea Surface</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_salt.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Salinity</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>
            <li class="media-item">
              <a class="media-image" href="/dataset?eov=name" title="">
                <img src="{{h.url_for_static('/base/images/icon_ice.png')}}" alt="name" class="media-image img-responsive">
              </a>
              <span class="media-heading">Ice</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">123</span>
            </li>

          </ul>
        </div>
      </div>
      -->
      <div class="col-md-12 col1 module-content-end">
        <div class="module-content box">
          {% block eov_list %}
          <h3 class="heading">{{ _('SEARCH BY OCEAN VARIABLE') }}</h3>
          {% set eov = h.cioos_get_eovs(show_all=True) %}
          {% for grouper, list in eov|groupby('category') if grouper %}
          {% if grouper %}
          <h4>{{ _(grouper) }}</h4>
          <ul class="media-grid" data-module="media-grid">
            {% for item in list %}
            {% set href = h.url_for(controller='package', action='search', eov=item.name) %}
            {% set label = label_function(item) if label_function else item.display_name %}
            {% set label = _(label) %}
            {% set label_truncated = h.truncate(label, 20) if not label_function else label %}
            {% set count = count_label(item['count']) if count_label else ('%d' % item['count']) %}
            {% set img_url = item.image_display_url or h.url_for_static('/base/images/eov-icons-svg/' + item.get('icon')) %}
            <li class="media-item {{ 'media-item-disabled' if count|trim == '0'}}">
              <a class="media-image" href="{{ href }}" title="{{ label if label != label_truncated else '' }}">
                <img src="{{ img_url }}" alt="{{ item.name }}" class="media-image img-responsive">
              </a>
              <span class="media-heading">{{ label_truncated }}</span>
              <span class="hidden separator"> - </span>
              <span class="item-count badge">{{ count }}</span>
            </li>
            {% endfor %}
          </ul>
          {% endif %}
          {% endfor %}
          {% endblock %}
        </div>
      </div>

    </div>
  </div>
</div>
